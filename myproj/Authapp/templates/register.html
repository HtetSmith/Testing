<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div class="container">
        <h2>Register</h2>
        {% comment %} <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <label for="name">Name</label>
            {{ user_form.username }}

            <label for="email">Email Address</label>
            {{ user_form.email }}

            <label for="password">Password</label>
            {{ user_form.password1 }}

            <label for="confirm-password">Confirm Password</label>
            {{ user_form.password2 }}

            <label for="role">Role:</label>
            {{ user_form.role }}

            <label for="profile_photo">Profile Photo:</label>
            {{ profile_form.profile_photo }}

            <label for="country">Country</label>
            {{ profile_form.country }}

            <label for="city">City</label>
            {{ profile_form.region }}

            <label for="phone_number">Phone Number:</label>
            {{ profile_form.phone_number }}

            <button type="submit">Sign Up</button>
            {% for field in user_form %}
                {{ field.label_tag }} {{ field }}
                {% for error in field.errors %}
                    <p class="error">{{ error }}</p>
                {% endfor %}
            {% endfor %}
        </form> {% endcomment %}
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <label for="id_username">Name</label>
            {{ user_form.username }}
            {% for error in user_form.username.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_email">Email Address</label>
            {{ user_form.email }}
            {% for error in user_form.email.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_password1">Password</label>
            {{ user_form.password1 }}
            {% for error in user_form.password1.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_password2">Confirm Password</label>
            {{ user_form.password2 }}
            {% for error in user_form.password2.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_role">Role</label>
            {{ user_form.role }}
            {% for error in user_form.role.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_profile_photo">Profile Photo</label>
            {{ profile_form.profile_photo }}
            {% for error in profile_form.profile_photo.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_country">Country</label>
            {{ profile_form.country }}
            {% for error in profile_form.country.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_region">City</label>
            {{ profile_form.region }}
            {% for error in profile_form.region.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <label for="id_phone_number">Phone Number</label>
            {{ profile_form.phone_number }}
            {% for error in profile_form.phone_number.errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        
            <button type="submit">Sign Up</button>
        </form>
        
        <div class="alt-action">
            <p>Already have an account? <a href="{% url 'custom_login_view' %}">Login</a></p>
        </div>
    </div>

    <Script>
    function validateRegister() {
    const username = document.getElementById("username").value;
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirmPassword").value;

    // Check if any fields are empty
    if (username === "" || email === "" || password === "" || confirmPassword === "") {
        alert("Please fill out all fields.");
        return false;
    }

    // Check if passwords match
    if (password !== confirmPassword) {
        alert("Passwords do not match.");
        return false;
    }

    // Email validation
    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    if (!emailPattern.test(email)) {
        alert("Please enter a valid email address.");
        return false;
    }

    // Password strength validation
    const passwordStrengthPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
    if (!passwordStrengthPattern.test(password)) {
        alert("Password must be at least 8 characters long, contain both upper and lower case letters, include a number, and have at least one special character.");
        return false;
    }
    return true;
    }
    </Script>
</body>
</html>